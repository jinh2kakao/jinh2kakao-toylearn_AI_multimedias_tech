
### ğŸ”© Phase 4: ë°±ì—”ë“œ ê°œë°œ (Back-end) ìƒì„¸ ê°€ì´ë“œ

ì´ ë‹¨ê³„ëŠ” 6ê°€ì§€ í•µì‹¬ Taskë¡œ ë‚˜ë‰©ë‹ˆë‹¤.

1.  ê¸°ìˆ  ìŠ¤íƒ ë° ì•„í‚¤í…ì²˜ ì„ ì •
2.  API ëª…ì„¸ì„œ ì •ì˜ (The Contract)
3.  ì¸ì¦(Authentication) ë° ì¸ê°€(Authorization) êµ¬í˜„
4.  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë° API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ (CRUD)
5.  ë‹¨ìœ„(Unit) ë° í†µí•©(Integration) í…ŒìŠ¤íŠ¸ ì‘ì„±
6.  API ë¬¸ì„œí™” ë° ë°°í¬ ì¤€ë¹„

---

### 1. ê¸°ìˆ  ìŠ¤íƒ ë° ì•„í‚¤í…ì²˜ ì„ ì •

* **ğŸ¯ ëª©í‘œ:** ì„œë¹„ìŠ¤ì˜ íŠ¹ì„±(ì‹¤ì‹œê°„ ì—¬ë¶€, ë°ì´í„° ê·œëª¨, í™•ì¥ì„±)ì— ê°€ì¥ ì í•©í•œ ë°±ì—”ë“œ ì–¸ì–´, í”„ë ˆì„ì›Œí¬, ì•„í‚¤í…ì²˜ë¥¼ AIì˜ ì¡°ì–¸ì„ ë°›ì•„ ê²°ì •í•©ë‹ˆë‹¤.
* **ğŸ”§ í•µì‹¬ ì—…ë¬´ Task:**
    * ì„œë²„ ì–¸ì–´ ë° í”„ë ˆì„ì›Œí¬ ê²°ì • (ì˜ˆ: Node.js/Express, Python/FastAPI, Go)
    * ì•„í‚¤í…ì²˜ ê²°ì • (ì˜ˆ: Monolithic, Microservices, Serverless)
    * 3ë‹¨ê³„ í”„ë¡ íŠ¸ì—”ë“œ(Next.js)ì™€ì˜ ìµœì  ì¡°í•© ê³ ë ¤
* **ğŸ¤– í™œìš© AI ë„êµ¬:**
    * **ë²”ìš© LLM (Gemini, Claude 3):** ê¸°ìˆ  ìŠ¤íƒ ê°„ì˜ ì¥ë‹¨ì ì„ ë¹„êµí•˜ê³ , ìš°ë¦¬ ì„œë¹„ìŠ¤ì— ë§ëŠ” ì•„í‚¤í…ì²˜ë¥¼ ì¶”ì²œë°›ìŠµë‹ˆë‹¤.
    * **Cursor (AI Native IDE):** ê²°ì •ëœ ìŠ¤íƒìœ¼ë¡œ í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •ì„ ì§€ì‹œí•©ë‹ˆë‹¤.

#### ğŸ’¡ AI í™œìš© ì „ëµ

* **'ì œì•½ ì¡°ê±´' ê¸°ë°˜ ì¶”ì²œ:** AIì—ê²Œ 1ë‹¨ê³„ì˜ PRDì™€ 3ë‹¨ê³„ì˜ ê¸°ìˆ  ìŠ¤íƒì„ 'ì œì•½ ì¡°ê±´'ìœ¼ë¡œ ì œê³µí•˜ì—¬, "Next.js í”„ë¡ íŠ¸ì—”ë“œì™€ ê°€ì¥ ì˜ ë§ê³ , êµ¬ë… ê²°ì œ(Stripe) ë° ëŒ€ëŸ‰ì˜ í…ìŠ¤íŠ¸ ë°ì´í„°(í”„ë¡¬í”„íŠ¸) ì²˜ë¦¬ì— ìš©ì´í•˜ë©°, ê°œë°œ ì†ë„ê°€ ë¹ ë¥¸ ë°±ì—”ë“œ ìŠ¤íƒ"ì„ ì¶”ì²œë°›ìŠµë‹ˆë‹¤.
* **ì•„í‚¤í…ì²˜ ë¹„êµ:** "Serverless(Vercel Functions)ì™€ ì „í†µì ì¸ Express ì„œë²„ ì¤‘ ì–´ë–¤ ê²ƒì´ ìš°ë¦¬ 'í”„ë¡¬í”„íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬' MVPì— ë” ìœ ë¦¬í•œì§€ ì¥ë‹¨ì ì„ ë¹„êµ ë¶„ì„í•´ì¤˜."

#### âœï¸ ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸

> **[ê¸°ìˆ  ìŠ¤íƒ ì¶”ì²œ (ë²”ìš© LLM)]**
> "ë„ˆëŠ” ìµœê³  ê¸°ìˆ  ì±…ì„ì(CTO) AIì•¼.
> ìš°ë¦¬ëŠ” 'í”„ë¡¬í”„íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ êµ¬ë… ì„œë¹„ìŠ¤'ë¥¼ êµ¬ì¶• ì¤‘ì´ì•¼.
>
> **ìš”êµ¬ì‚¬í•­:**
> 1.  í”„ë¡ íŠ¸ì—”ë“œ: Next.js (Phase 3ì—ì„œ ì™„ë£Œ)
> 2.  í•µì‹¬ ê¸°ëŠ¥: í”„ë¡¬í”„íŠ¸ CRUD, íƒœê·¸ ê²€ìƒ‰, ìœ ë£Œ êµ¬ë… ê²°ì œ(Stripe ì—°ë™), ì‚¬ìš©ìë³„ ë¼ì´ë¸ŒëŸ¬ë¦¬.
> 3.  ìš°ì„ ìˆœìœ„: ë¹ ë¥¸ MVP ì¶œì‹œ, ì•ˆì •ì ì¸ í™•ì¥ì„±, Next.jsì™€ì˜ ì›í™œí•œ í†µí•©.
>
> **ì§ˆë¬¸:**
> Node.js(Express)ì™€ Python(FastAPI) ì¤‘ ì–´ë–¤ ìŠ¤íƒì´ ë” ì í•©í•œì§€, ê·¸ ì´ìœ ì™€ í•¨ê»˜ ì¥ë‹¨ì ì„ í‘œë¡œ ë¹„êµí•´ ì¤˜. ë˜í•œ, Vercelì˜ Serverless Functionsë¥¼ ì‚¬ìš©í•˜ëŠ” 'Full-stack Next.js' ì ‘ê·¼ ë°©ì‹ì˜ ì¥ë‹¨ì ë„ í•¨ê»˜ ë¶„ì„í•´ ì¤˜."

> **[í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • (Cursor)]**
> (Node.js/Expressë¡œ ê²°ì •í–ˆë‹¤ê³  ê°€ì •)
> "í˜„ì¬ í´ë”ì— 'Node.js' ë°±ì—”ë“œ í”„ë¡œì íŠ¸ë¥¼ 'TypeScript' ê¸°ë°˜ìœ¼ë¡œ ìƒˆë¡œ ìƒì„±í•´ ì¤˜. 'Express' í”„ë ˆì„ì›Œí¬ë¥¼ ì„¤ì¹˜í•˜ê³ , 'ESLint'ì™€ 'Prettier' ì„¤ì •ì„ ì™„ë£Œí•´ ì¤˜.
> ë˜í•œ, `src/routes`, `src/controllers`, `src/services`, `src/middleware` í´ë” êµ¬ì¡°ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ ì¤˜."

---

### 2. API ëª…ì„¸ì„œ ì •ì˜ (The Contract)

* **ğŸ¯ ëª©í‘œ:** 1ë‹¨ê³„ PRDì˜ 'ì‚¬ìš©ì ìŠ¤í† ë¦¬'ì™€ 3ë‹¨ê³„ í”„ë¡ íŠ¸ì—”íŠ¸ì˜ 'Mock API'ë¥¼ ê¸°ë°˜ìœ¼ë¡œ, í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œê°€ í†µì‹ í•  'ê·œì¹™(Contract)'ì¸ API ëª…ì„¸ì„œ(Swagger/OpenAPI)ë¥¼ í™•ì •í•©ë‹ˆë‹¤.
* **ğŸ”§ í•µì‹¬ ì—…ë¬´ Task:**
    * HTTP ë©”ì†Œë“œ(GET, POST, PUT, DELETE) ë° ì—”ë“œí¬ì¸íŠ¸ ê²½ë¡œ(Path) ì •ì˜
    * ìš”ì²­(Request) Body ë° ì‘ë‹µ(Response) Bodyì˜ ë°ì´í„° í˜•ì‹(JSON Schema) ì •ì˜
    * OpenAPI (Swagger) 3.0 ìŠ¤í™ ë¬¸ì„œ(YAML ë˜ëŠ” JSON) ì‘ì„±
* **ğŸ¤– í™œìš© AI ë„êµ¬:**
    * **ë²”ìš© LLM (Gemini, ChatGPT):** ì‚¬ìš©ì ìŠ¤í† ë¦¬ë¥¼ OpenAPI í¬ë§·ìœ¼ë¡œ ìë™ ë³€í™˜í•©ë‹ˆë‹¤.
    * **Cursor:** ìƒì„±ëœ ìŠ¤í™ì„ ê¸°ë°˜ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬/ì„œë¹„ìŠ¤ì˜ 'ë¹ˆ ê»ë°ê¸°(Scaffolding)' ì½”ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

#### ğŸ’¡ AI í™œìš© ì „ëµ

* **'PRD'ì—ì„œ 'API Spec'ìœ¼ë¡œ ë³€í™˜:** 1ë‹¨ê³„ì—ì„œ ì‘ì„±í•œ PRD(íŠ¹íˆ ì‚¬ìš©ì ìŠ¤í† ë¦¬)ë¥¼ AIì—ê²Œ 'ì…ë ¥'ìœ¼ë¡œ ì œê³µí•˜ì—¬, ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ API ëª…ì„¸ì„œë¥¼ 'ì¶œë ¥'í•˜ê²Œ í•©ë‹ˆë‹¤.
* **í”„ë¡ íŠ¸ì—”ë“œ Mock API ì°¸ì¡°:** 3ë‹¨ê³„ì˜ `mockPrompts.ts` ì½”ë“œë¥¼ AIì—ê²Œ `@` (Cursor ê¸°ëŠ¥)ë¡œ ì°¸ì¡°ì‹œì¼œ, í”„ë¡ íŠ¸ì—”ë“œê°€ ê¸°ëŒ€í•˜ëŠ” ë°ì´í„° êµ¬ì¡°ì™€ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” ì‘ë‹µ(Response) ìŠ¤í‚¤ë§ˆë¥¼ ì„¤ê³„í•©ë‹ˆë‹¤.

#### âœï¸ ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸

> **[OpenAPI ìŠ¤í™ ìƒì„± (ë²”ìš© LLM / Cursor)]**
> "ë„ˆëŠ” ë°±ì—”ë“œ ì•„í‚¤í…íŠ¸ AIì•¼.
> 1ë‹¨ê³„ PRDì™€ 3ë‹¨ê³„ í”„ë¡ íŠ¸ì—”ë“œ ìš”êµ¬ì‚¬í•­ì„ ê¸°ë°˜ìœ¼ë¡œ 'í”„ë¡¬í”„íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬' APIì— ëŒ€í•œ **OpenAPI 3.0 ìŠ¤í™**ì„ YAML í˜•ì‹ìœ¼ë¡œ ì‘ì„±í•´ ì¤˜.
>
> **í•„ìˆ˜ ì—”ë“œí¬ì¸íŠ¸:**
> 1.  `POST /api/users/signup` (íšŒì›ê°€ì…)
> 2.  `POST /api/users/login` (ë¡œê·¸ì¸ - JWT í† í° ë°˜í™˜)
> 3.  `GET /api/prompts` (ëª¨ë“  í”„ë¡¬í”„íŠ¸ ì¡°íšŒ - í˜ì´ì§€ë„¤ì´ì…˜, í•„í„°ë§ í¬í•¨)
> 4.  `POST /api/prompts` (ìƒˆ í”„ë¡¬í”„íŠ¸ ìƒì„± - ì¸ì¦ í•„ìš”)
> 5.  `GET /api/prompts/{id}` (íŠ¹ì • í”„ë¡¬í”„íŠ¸ ìƒì„¸ ì¡°íšŒ)
> 6.  `PUT /api/prompts/{id}` (í”„ë¡¬í”„íŠ¸ ìˆ˜ì • - ë³¸ì¸/ê´€ë¦¬ìë§Œ)
> 7.  `DELETE /api/prompts/{id}` (í”„ë¡¬í”„íŠ¸ ì‚­ì œ - ë³¸ì¸/ê´€ë¦¬ìë§Œ)
> 8.  `GET /api/users/me/library` (ë‚´ ë¼ì´ë¸ŒëŸ¬ë¦¬ í”„ë¡¬í”„íŠ¸ ì¡°íšŒ - ì¸ì¦ í•„ìš”)
> 9.  `POST /api/subscribe/webhook` (Stripe ê²°ì œ ì›¹í›… ìˆ˜ì‹ )
>
> `GET /api/prompts/{id}`ì˜ ì‘ë‹µ ìŠ¤í‚¤ë§ˆëŠ” 3ë‹¨ê³„ì˜ `@src/types/prompt.ts` íŒŒì¼ì˜ `Prompt` íƒ€ì…ì„ ì°¸ì¡°í•´ì„œ ì‘ì„±í•´ ì¤˜."

---

### 3. ì¸ì¦(Authentication) ë° ì¸ê°€(Authorization) êµ¬í˜„

* **ğŸ¯ ëª©í‘œ:** APIë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•´ 'ë¡œê·¸ì¸(ì¸ì¦)' ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³ , 'ìœ ë£Œ ì‚¬ìš©ì(Pro)'ì™€ 'ë¬´ë£Œ ì‚¬ìš©ì(Free)'ì˜ ì ‘ê·¼ ê¶Œí•œì„ êµ¬ë¶„í•˜ëŠ” 'ì¸ê°€' ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
* **ğŸ”§ í•µì‹¬ ì—…ë¬´ Task:**
    * íšŒì›ê°€ì…(ë¹„ë°€ë²ˆí˜¸ í•´ì‹œí™” - bcrypt) ë° ë¡œê·¸ì¸(JWT í† í° ë°œê¸‰) ë¡œì§ êµ¬í˜„
    * API ìš”ì²­ ì‹œ JWT í† í°ì„ ê²€ì¦í•˜ëŠ” 'ë¯¸ë“¤ì›¨ì–´(Middleware)' ì‘ì„±
    * 'Pro' ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë³´í˜¸í•˜ëŠ” 'ì¸ê°€ ë¯¸ë“¤ì›¨ì–´' ì‘ì„±
* **ğŸ¤– í™œìš© AI ë„êµ¬:**
    * **Cursor, GitHub Copilot:** ë³´ì•ˆ ë¼ì´ë¸ŒëŸ¬ë¦¬(JWT, bcrypt)ë¥¼ í™œìš©í•œ í‘œì¤€ ì¸ì¦ ì½”ë“œë¥¼ ì‹ ì†í•˜ê²Œ ìƒì„±í•©ë‹ˆë‹¤.
    * **ë²”ìš© LLM:** OAuth(ì†Œì…œ ë¡œê·¸ì¸) ë“± ë³µì¡í•œ ì¸ì¦ íŒ¨í„´ì— ëŒ€í•œ ê°€ì´ë“œë¥¼ ë°›ìŠµë‹ˆë‹¤.

#### ğŸ’¡ AI í™œìš© ì „ëµ

* **'ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€' ìš”ì²­:** AIì—ê²Œ "JWTë¥¼ ì‚¬ìš©í•œ ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ì˜ 'ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€(Security Best Practice)'ë¥¼ ì ìš©í•˜ì—¬ ì½”ë“œë¥¼ ìƒì„±í•´ ì¤˜"ë¼ê³  ì§€ì‹œí•˜ì—¬, `jsonwebtoken` ë¼ì´ë¸ŒëŸ¬ë¦¬ ê²€ì¦, í™˜ê²½ ë³€ìˆ˜(`process.env.JWT_SECRET`) ì‚¬ìš© ë“±ì„ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ì‘ì„±í•˜ê²Œ í•©ë‹ˆë‹¤.

#### âœï¸ ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸

> **[ì¸ì¦/ì¸ê°€ ë¯¸ë“¤ì›¨ì–´ ìƒì„± (Cursor)]**
> "Node.js/Express í”„ë¡œì íŠ¸ì˜ `src/middleware` í´ë”ì— ë‹¤ìŒ íŒŒì¼ 2ê°œë¥¼ ìƒì„±í•´ ì¤˜.
>
> 1.  **`authenticateToken.ts`**:
>     - `Authorization` í—¤ë”ì—ì„œ 'Bearer' í† í°ì„ ì¶”ì¶œí•´.
>     - `jsonwebtoken` ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ `process.env.JWT_SECRET`ì„ ì‚¬ìš©í•´ì„œ í† í°ì„ ê²€ì¦í•´.
>     - ê²€ì¦ì— ì„±ê³µí•˜ë©´ `req.user`ì— í† í° í˜ì´ë¡œë“œ(payload)ë¥¼ ì €ì¥í•˜ê³  `next()`ë¥¼ í˜¸ì¶œí•´.
>     - ì‹¤íŒ¨í•˜ë©´ 401 Unauthorized ë˜ëŠ” 403 Forbidden ì—ëŸ¬ë¥¼ ë°˜í™˜í•´.
>
> 2.  **`authorizePro.ts`**:
>     - ì´ ë¯¸ë“¤ì›¨ì–´ëŠ” `authenticateToken` *ë‹¤ìŒì—* ì‹¤í–‰ë˜ì–´ì•¼ í•´.
>     - `req.user.role` (ë˜ëŠ” `req.user.subscriptionStatus`)ì´ 'PRO'ê°€ ì•„ë‹ˆë©´, 403 Forbidden ì—ëŸ¬ì™€ í•¨ê»˜ 'Pro subscription required' ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•´.
>     - 'PRO'ê°€ ë§ìœ¼ë©´ `next()`ë¥¼ í˜¸ì¶œí•´."

---

### 4. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë° API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ (CRUD)

* **ğŸ¯ ëª©í‘œ:** 2ë‹¨ê³„ì—ì„œ ì •ì˜í•œ API ëª…ì„¸ì„œì˜ ê° ì—”ë“œí¬ì¸íŠ¸ê°€ ì‹¤ì œë¡œ ë™ì‘í•˜ë„ë¡ 'ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(Service)'ê³¼ 'ìš”ì²­ ì²˜ë¦¬(Controller)' ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
* **ğŸ”§ í•µì‹¬ ì—…ë¬´ Task:**
    * **Controller:** HTTP ìš”ì²­(Request)ì„ ë°›ê³ , ì‘ë‹µ(Response)ì„ ë³´ë‚´ëŠ” 'ê´€ë¬¸' ì—­í• . (ìš”ì²­ ë°ì´í„° ê²€ì¦)
    * **Service:** ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ê³„ì‚°, ì¡°ê±´)ì„ ì²˜ë¦¬í•˜ê³ , DB(Phase 5)ì™€ í†µì‹ í•˜ëŠ” 'í•µì‹¬' ì—­í• .
    * 2ë‹¨ê³„ì˜ OpenAPI ìŠ¤í™ì— ì •ì˜ëœ ëª¨ë“  CRUD ë¡œì§ êµ¬í˜„
* **ğŸ¤– í™œìš© AI ë„êµ¬:**
    * **Cursor (AI Native IDE):** (í•µì‹¬) ì½”ë“œë² ì´ìŠ¤ ì „ì²´ë¥¼ 'ë§¥ë½'ìœ¼ë¡œ AIê°€ APIë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
    * **GitHub Copilot:** ë°˜ë³µì ì¸ CRUD ì½”ë“œ ì‘ì„± ì‹œ ìë™ ì™„ì„±.

#### ğŸ’¡ AI í™œìš© ì „ëµ

* **'@'íŒŒì¼ ì°¸ì¡°ë¡œ ë§¥ë½ ì£¼ì…:** Cursorì—ì„œ `@` ê¸°í˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ 1ë‹¨ê³„ì˜ [PRD], 2ë‹¨ê³„ì˜ [API ìŠ¤í™], 5ë‹¨ê³„ì˜ [DB ìŠ¤í‚¤ë§ˆ] íŒŒì¼ì„ AIì˜ ë§¥ë½ì— í¬í•¨ì‹œí‚µë‹ˆë‹¤.
* **'êµ¬í˜„'ì„ í†µì§¸ë¡œ ëª…ë ¹:** AIì—ê²Œ "ì´ API ìŠ¤í™ì„ ë³´ê³ , ì´ DB ìŠ¤í‚¤ë§ˆë¥¼ ì‚¬ìš©í•´ì„œ, ì´ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤ ë¡œì§ì„ êµ¬í˜„í•´ ì¤˜"ë¼ëŠ” ê³ ìˆ˜ì¤€ì˜ ëª…ë ¹ì„ ë‚´ë¦½ë‹ˆë‹¤.

#### âœï¸ ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸

> **[API êµ¬í˜„ (Cursor)]**
> (ì»¨íŠ¸ë¡¤ëŸ¬ì™€ ì„œë¹„ìŠ¤ íŒŒì¼ì„ ì—´ì–´ë‘” ìƒíƒœ)
> "ì¢‹ì•„, ì´ì œ í•µì‹¬ ë¡œì§ì„ êµ¬í˜„í•˜ì.
>
> 1.  `@src/routes/promptRoutes.ts` íŒŒì¼ì„ ì—´ì–´.
> 2.  2ë‹¨ê³„ì˜ `@apiSpec.yaml`ì— ì •ì˜ëœ `POST /api/prompts` ì—”ë“œí¬ì¸íŠ¸ ë¼ìš°íŠ¸ë¥¼ ì¶”ê°€í•´.
> 3.  ì´ ë¼ìš°íŠ¸ëŠ” 3ë‹¨ê³„ì˜ `@src/middleware/authenticateToken.ts` ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µê³¼í•´ì•¼ í•´.
> 4.  ì´ ë¼ìš°íŠ¸ëŠ” `@src/controllers/promptController.ts` íŒŒì¼ì˜ `createPrompt` í•¨ìˆ˜ì— ì—°ê²°í•´ ì¤˜.
> 5.  ì´ì œ `promptController.ts` íŒŒì¼ë¡œ ì´ë™í•´ì„œ `createPrompt` í•¨ìˆ˜ë¥¼ êµ¬í˜„í•´.
>     - (Joië‚˜ Zod ê°™ì€) ìœ íš¨ì„± ê²€ì‚¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ `req.body` (title, description ë“±)ë¥¼ ê²€ì¦í•´.
>     - ê²€ì¦ì— í†µê³¼í•˜ë©´, `req.user.id` (ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ì—ì„œ ê°€ì ¸ì˜´)ì™€ `req.body`ë¥¼ `@src/services/promptService.ts`ì˜ `createPromptForUser` í•¨ìˆ˜ë¡œ ë„˜ê²¨ì¤˜.
>     - ì„œë¹„ìŠ¤ê°€ ë°˜í™˜í•œ 'ìƒˆ í”„ë¡¬í”„íŠ¸ ê°ì²´'ë¥¼ 201 Created ìƒíƒœ ì½”ë“œì™€ í•¨ê»˜ JSONìœ¼ë¡œ ì‘ë‹µí•´.
>     - ì„œë¹„ìŠ¤ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´, 500 Internal Server Errorë¥¼ ë°˜í™˜í•´."

---

### 5. ë‹¨ìœ„(Unit) ë° í†µí•©(Integration) í…ŒìŠ¤íŠ¸ ì‘ì„±

* **ğŸ¯ ëª©í‘œ:** AIê°€ ì‘ì„±í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì˜ë„í•œ ëŒ€ë¡œ ì •í™•íˆ ì‘ë™í•˜ëŠ”ì§€, ì—£ì§€ ì¼€ì´ìŠ¤(Edge Case)ì—ì„œ ì˜¤ë¥˜ëŠ” ì—†ëŠ”ì§€ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
* **ğŸ”§ í•µì‹¬ ì—…ë¬´ Task:**
    * **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸:** 'Service' ë¡œì§(ì˜ˆ: `createPromptForUser`)ë§Œ ë¶„ë¦¬í•˜ì—¬ í…ŒìŠ¤íŠ¸ (DBëŠ” Mocking)
    * **í†µí•© í…ŒìŠ¤íŠ¸:** ì‹¤ì œ API ì—”ë“œí¬ì¸íŠ¸(`POST /api/prompts`)ë¥¼ í˜¸ì¶œí•˜ì—¬ ì¸ì¦, ë¡œì§, DB(í…ŒìŠ¤íŠ¸ìš© DB)ê¹Œì§€ ì „ì²´ íë¦„ì„ í…ŒìŠ¤íŠ¸
* **ğŸ¤– í™œìš© AI ë„êµ¬:**
    * **CodiumAI, Testim.io:** ê¸°ì¡´ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì™€ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.
    * **Cursor, GitHub Copilot:** (Jest, Supertest ë“±) í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ì˜ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

#### ğŸ’¡ AI í™œìš© ì „ëµ

* **'í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€' ìš”ì²­:** AIì—ê²Œ "ë°©ê¸ˆ ì‘ì„±í•œ `promptService.ts` íŒŒì¼ì˜ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 90% ì´ìƒì„ ë‹¬ì„±í•  ìˆ˜ ìˆë„ë¡ Jest ê¸°ë°˜ì˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ ì¤˜"ë¼ê³  ì§€ì‹œí•©ë‹ˆë‹¤.
* **'ì—£ì§€ ì¼€ì´ìŠ¤' ìƒì„± ìš”ì²­:** "Happy Path (ì •ìƒ) ì¼€ì´ìŠ¤ ì™¸ì—, ì´ í•¨ìˆ˜ê°€ ì‹¤íŒ¨í•  ìˆ˜ ìˆëŠ” 'ì—£ì§€ ì¼€ì´ìŠ¤' 5ê°€ì§€ë¥¼ ì œì•ˆí•˜ê³ , ê·¸ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ ì¤˜."

#### âœï¸ ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸

> ** [ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ìƒì„± (CodiumAI / Cursor)] 
> (promptService.ts íŒŒì¼ì„ ì°¸ì¡°í•˜ë©°) 
> "Jestì™€ 'Jest Mock'ì„ ì‚¬ìš©í•˜ì—¬ promptService.tsì˜ createPromptForUser í•¨ìˆ˜ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•´ ì¤˜.
> í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:
> 'Happy Path': ìœ íš¨í•œ ì‚¬ìš©ì IDì™€ í”„ë¡¬í”„íŠ¸ ë°ì´í„°ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, DB(Mock) create í•¨ìˆ˜ê°€ 1ë²ˆ í˜¸ì¶œë˜ê³ , ìƒˆ í”„ë¡¬í”„íŠ¸ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ”ì§€.
> 'Validation Error': 'title'ì´ ëˆ„ë½ëœ ê²½ìš°, ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ëŠ”ì§€.
> 'DB Error': DB(Mock) create í•¨ìˆ˜ê°€ ì˜ˆì™¸(Exception)ë¥¼ ë°œìƒì‹œì¼°ì„ ë•Œ, ì´ ì—ëŸ¬ë¥¼ ìƒìœ„(ì»¨íŠ¸ë¡¤ëŸ¬)ë¡œ ì œëŒ€ë¡œ ì „íŒŒí•˜ëŠ”ì§€."

---

### 6. API ë¬¸ì„œí™”

* **ğŸ¯ ëª©í‘œ:** 2ë‹¨ê³„ì—ì„œ ì‘ì„±í•œ OpenAPI ìŠ¤í™ì„ ê¸°ë°˜ìœ¼ë¡œ, 3ë‹¨ê³„ì˜ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì(í˜¹ì€ AI)ê°€ APIë¥¼ ì‰½ê²Œ ì‚¬ìš©í•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë„ë¡ 'ì¸í„°ë™í‹°ë¸Œí•œ ë¬¸ì„œ'ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
* **ğŸ”§ í•µì‹¬ ì—…ë¬´ Task:**
    * OpenAPI(YAML) íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ Swagger UI ë˜ëŠ” Redoc ì •ì  í˜ì´ì§€ ìƒì„±
    * (ê¶Œì¥) ì½”ë“œ ì£¼ì„(JSDoc)ì„ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì„œë¥¼ ìë™ ìƒì„±í•˜ëŠ” ë„êµ¬(ì˜ˆ: Mintlify) ë„ì…
* **ğŸ¤– í™œìš© AI ë„êµ¬:**
    * **Mintlify, Scribe:** ì½”ë“œë² ì´ìŠ¤ë‚˜ ì£¼ì„ì„ ì½ì–´ ìë™ìœ¼ë¡œ ë³´ê¸° ì¢‹ì€ ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
    * **Cursor:** API ì»¨íŠ¸ë¡¤ëŸ¬ ì½”ë“œì— JSDoc í˜•ì‹ì˜ ì£¼ì„ì„ ìë™ìœ¼ë¡œ ì¶”ê°€í•˜ë„ë¡ ì§€ì‹œí•©ë‹ˆë‹¤.

#### ğŸ’¡ AI í™œìš© ì „ëµ

* **'ì£¼ì„' ì‘ì„±ì„ ìë™í™”:** AIê°€ ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ, "JSDoc í˜•ì‹ìœ¼ë¡œ í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ì™€ ë°˜í™˜ ê°’ì„ ì„¤ëª…í•˜ëŠ” ì£¼ì„ì„ í•¨ê»˜ ë‹¬ì•„ì¤˜"ë¼ê³  ì§€ì‹œí•˜ì—¬, ì½”ë“œì™€ ë¬¸ì„œê°€ í•­ìƒ ì¼ì¹˜í•˜ë„ë¡ í•©ë‹ˆë‹¤.

#### âœï¸ ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸

> **[ì½”ë“œ ì£¼ì„ ìë™ ìƒì„± (Cursor)]**
> "`src/controllers` í´ë” ë‚´ì˜ ëª¨ë“  íŒŒì¼ê³¼ í•¨ìˆ˜ë¥¼ ê²€í† í•´.
> Mintlifyê°€ ì¸ì‹í•  ìˆ˜ ìˆë„ë¡ JSDoc í‘œì¤€ì— ë§ì¶° ê° API ì—”ë“œí¬ì¸íŠ¸ í•¨ìˆ˜ ìœ„ì— ìƒì„¸í•œ ì£¼ì„ì„ ì¶”ê°€í•´ ì¤˜.
> ì£¼ì„ì—ëŠ” **[í•¨ìˆ˜ ì„¤ëª…], [@param {Request} req], [@param {Response} res], [@returns {Promise<Response>}]**ê°€ ë°˜ë“œì‹œ í¬í•¨ë˜ì–´ì•¼ í•´."

---